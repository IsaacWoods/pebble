<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A very generic, contextual pwrite interface in Rust."><title>Pwrite in scroll - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="scroll" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (1891c2866 2025-01-04)" data-channel="nightly" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../scroll/index.html">scroll</a><span class="version">0.12.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Pwrite</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.pwrite_with" title="pwrite_with">pwrite_with</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.gwrite" title="gwrite">gwrite</a></li><li><a href="#method.gwrite_with" title="gwrite_with">gwrite_with</a></li><li><a href="#method.pwrite" title="pwrite">pwrite</a></li></ul><h3><a href="#foreign-impls">Implementations on Foreign Types</a></h3><ul class="block"><li><a href="#impl-Pwrite%3CCtx,+E%3E-for-%5Bu8%5D" title="[u8]">[u8]</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate scroll</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="index.html">scroll</a></span><h1>Trait <span class="trait">Pwrite</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/scroll/pwrite.rs.html#33-88">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Pwrite&lt;Ctx: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>, E&gt; {
    // Required method
    fn <a href="#tymethod.pwrite_with" class="fn">pwrite_with</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
        &amp;mut self,
        n: N,
        offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
        ctx: Ctx,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;;

    // Provided methods
    fn <a href="#method.pwrite" class="fn">pwrite</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
        &amp;mut self,
        n: N,
        offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;
       <span class="where">where Ctx: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.gwrite" class="fn">gwrite</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
        &amp;mut self,
        n: N,
        offset: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;
       <span class="where">where Ctx: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a></span> { ... }
<span class="item-spacer"></span>    fn <a href="#method.gwrite_with" class="fn">gwrite_with</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
        &amp;mut self,
        n: N,
        offset: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
        ctx: Ctx,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A very generic, contextual pwrite interface in Rust.</p>
<p>Like <a href="trait.Pread.html">Pread</a> — but for writing!</p>
<p>Implementing <code>Pwrite</code> on a data store allows you to then write almost arbitrarily complex types
efficiently.</p>
<p>To this end the Pwrite trait works in conjuction with the <a href="ctx/trait.TryIntoCtx.html">TryIntoCtx</a>;
The <code>TryIntoCtx</code> trait implemented on a type defines how to convert said type into data that
an implementation of Pwrite can … well … write.</p>
<p>As with <a href="trait.Pread.html">Pread</a> ‘data’ does not necessarily mean <code>&amp;[u8]</code> but can be any
indexable type. In fact much of the documentation of <code>Pread</code> applies to <code>Pwrite</code> as well just
with ‘read’ switched for ‘write’ and ‘From’ switched with ‘Into’ so if you haven’t yet you
should read the documentation of <code>Pread</code> first.</p>
<p>As with <code>Pread</code>, note that in the particular case of the implementation of <code>Pwrite</code> for <code>[u8]</code>,
writing it at the length boundary of that slice will cause to write in an empty slice.
i.e. we make use of the fact that <code>&amp;bytes[bytes.len()..]</code> will return an empty slice, rather
than returning an error. In the past, scroll returned an offset error.
In this case, this is relevant if you are writing an empty slice inside an empty slice and
expected this to work.</p>
<p>Unless you need to implement your own data store — that is either can’t convert to <code>&amp;[u8]</code> or
have a data that does not expose a <code>&amp;mut [u8]</code> — you will probably want to implement
<a href="ctx/trait.TryIntoCtx.html">TryIntoCtx</a> on your Rust types to be written.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.pwrite_with" class="method"><a class="src rightside" href="../src/scroll/pwrite.rs.html#53-58">Source</a><h4 class="code-header">fn <a href="#tymethod.pwrite_with" class="fn">pwrite_with</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
    &amp;mut self,
    n: N,
    offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
    ctx: Ctx,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;</h4></section></summary><div class="docblock"><p>Write <code>N</code> at offset <code>I</code> with context <code>Ctx</code></p>
<h5 id="example"><a class="doc-anchor" href="#example">§</a>Example</h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>scroll::{Pwrite, Pread, LE};
<span class="kw">let </span><span class="kw-2">mut </span>bytes: [u8; <span class="number">8</span>] = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>];
bytes.pwrite_with::&lt;u32&gt;(<span class="number">0xbeefbeef</span>, <span class="number">0</span>, LE).unwrap();
<span class="macro">assert_eq!</span>(bytes.pread_with::&lt;u32&gt;(<span class="number">0</span>, LE).unwrap(), <span class="number">0xbeefbeef</span>);</code></pre></div>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><section id="method.pwrite" class="method"><a class="src rightside" href="../src/scroll/pwrite.rs.html#35-44">Source</a><h4 class="code-header">fn <a href="#method.pwrite" class="fn">pwrite</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
    &amp;mut self,
    n: N,
    offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;<div class="where">where
    Ctx: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,</div></h4></section><details class="toggle method-toggle" open><summary><section id="method.gwrite" class="method"><a class="src rightside" href="../src/scroll/pwrite.rs.html#62-72">Source</a><h4 class="code-header">fn <a href="#method.gwrite" class="fn">gwrite</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
    &amp;mut self,
    n: N,
    offset: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;<div class="where">where
    Ctx: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,</div></h4></section></summary><div class="docblock"><p>Write <code>n</code> into <code>self</code> at <code>offset</code>, with a default <code>Ctx</code>. Updates the offset.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.gwrite_with" class="method"><a class="src rightside" href="../src/scroll/pwrite.rs.html#76-87">Source</a><h4 class="code-header">fn <a href="#method.gwrite_with" class="fn">gwrite_with</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
    &amp;mut self,
    n: N,
    offset: &amp;mut <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
    ctx: Ctx,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;</h4></section></summary><div class="docblock"><p>Write <code>n</code> into <code>self</code> at <code>offset</code>, with the <code>ctx</code>. Updates the offset.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="foreign-impls" class="section-header">Implementations on Foreign Types<a href="#foreign-impls" class="anchor">§</a></h2><details class="toggle implementors-toggle"><summary><section id="impl-Pwrite%3CCtx,+E%3E-for-%5Bu8%5D" class="impl"><a class="src rightside" href="../src/scroll/pwrite.rs.html#90-103">Source</a><a href="#impl-Pwrite%3CCtx,+E%3E-for-%5Bu8%5D" class="anchor">§</a><h3 class="code-header">impl&lt;Ctx: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Copy.html" title="trait core::marker::Copy">Copy</a>, E: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;<a class="enum" href="enum.Error.html" title="enum scroll::Error">Error</a>&gt;&gt; <a class="trait" href="trait.Pwrite.html" title="trait scroll::Pwrite">Pwrite</a>&lt;Ctx, E&gt; for [<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>]</h3></section></summary><div class="impl-items"><section id="method.pwrite_with" class="method trait-impl"><a class="src rightside" href="../src/scroll/pwrite.rs.html#91-102">Source</a><a href="#method.pwrite_with" class="anchor">§</a><h4 class="code-header">fn <a href="#tymethod.pwrite_with" class="fn">pwrite_with</a>&lt;N: <a class="trait" href="ctx/trait.TryIntoCtx.html" title="trait scroll::ctx::TryIntoCtx">TryIntoCtx</a>&lt;Ctx, Self, Error = E&gt;&gt;(
    &amp;mut self,
    n: N,
    offset: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>,
    ctx: Ctx,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.usize.html">usize</a>, E&gt;</h4></section></div></details><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/scroll/pwrite/trait.Pwrite.js" data-ignore-extern-crates="core" async></script></section></div></main></body></html>