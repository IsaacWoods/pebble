<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Asynchronous synchronization primitives"><title>maitake::sync - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e7950ecc.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="maitake" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0-nightly (bf1b174e7 2025-01-28)" data-channel="nightly" data-search-js="search-ccb196c1.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../maitake/index.html">maitake</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module sync</a></h2><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate maitake</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">maitake</a></div><h1>Module <span>sync</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/maitake/lib.rs.html#22">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Asynchronous synchronization primitives</p>
<p><a href="https://wiki.osdev.org/Synchronization_Primitives"><em>Synchronization primitives</em></a> are tools for implementing
synchronization between <a href="../task/index.html" title="mod maitake::task">tasks</a>: to control which tasks can run at any given
time, and in what order, and to coordinate tasks’ access to shared
resources. Typically, this synchronization involves some form of <em>waiting</em>.
In asynchronous systems, synchronization primitives allow tasks to wait by
yielding to the runtime scheduler, so that other tasks may run while they
are waiting. This module provides asynchronous implementations of common
synchronization primitives.</p>
<p>The following synchronization primitives are provided:</p>
<ul>
<li><a href="struct.Mutex.html" title="struct maitake::sync::Mutex"><code>Mutex</code></a>: a fairly queued, asynchronous <a href="https://en.wikipedia.org/wiki/Mutual_exclusion">mutual exclusion lock</a>, for
protecting shared data</li>
<li><a href="struct.RwLock.html" title="struct maitake::sync::RwLock"><code>RwLock</code></a>: a fairly queued, asynchronous <a href="https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock">readers-writer lock</a>, which
allows concurrent read access to shared data while ensuring write
access is exclusive</li>
<li><a href="struct.Semaphore.html" title="struct maitake::sync::Semaphore"><code>Semaphore</code></a>: an asynchronous <a href="https://en.wikipedia.org/wiki/Semaphore_(programming)">counting semaphore</a>, for limiting the
number of tasks which may run concurrently</li>
<li><a href="struct.WaitCell.html" title="struct maitake::sync::WaitCell"><code>WaitCell</code></a>, a cell that stores a <em>single</em> waiting task’s <a href="../task/struct.Waker.html" title="struct maitake::task::Waker"><code>Waker</code></a>, so
that the task can be woken by another task,</li>
<li><a href="struct.WaitQueue.html" title="struct maitake::sync::WaitQueue"><code>WaitQueue</code></a>, a queue of waiting tasks, which are woken in first-in,
first-out order</li>
<li><a href="struct.WaitMap.html" title="struct maitake::sync::WaitMap"><code>WaitMap</code></a>, a set of waiting tasks associated with keys, in which a task
can be woken by its key</li>
</ul>
<p><strong>Note</strong>: <code>maitake</code>’s synchronization primitives <em>do not</em> require the
<code>maitake</code> runtime, and can be used with any async executor. Therefore,
they are provided by a separate <a href="https://crates.io/crates/maitake-sync"><code>maitake-sync</code></a> crate, which can be
used without depending on the rest of the <code>maitake</code> runtime. This module
re-exports these APIs from <a href="https://crates.io/crates/maitake-sync"><code>maitake-sync</code></a>.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="mutex/index.html" title="mod maitake::sync::mutex">mutex</a></dt><dd>An asynchronous <a href="https://en.wikipedia.org/wiki/Mutual_exclusion">mutual exclusion lock</a>.</dd><dt><a class="mod" href="rwlock/index.html" title="mod maitake::sync::rwlock">rwlock</a></dt><dd>An asynchronous <a href="https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock">readers-writer lock</a>.</dd><dt><a class="mod" href="semaphore/index.html" title="mod maitake::sync::semaphore">semaphore</a></dt><dd>An asynchronous <a href="https://en.wikipedia.org/wiki/Semaphore_(programming)">counting semaphore</a>.</dd><dt><a class="mod" href="spin/index.html" title="mod maitake::sync::spin">spin</a></dt><dd>Synchronous spinning-based synchronization primitives.</dd><dt><a class="mod" href="util/index.html" title="mod maitake::sync::util">util</a></dt><dd>Reusable utilities for synchronization primitives.</dd><dt><a class="mod" href="wait_cell/index.html" title="mod maitake::sync::wait_cell">wait_<wbr>cell</a></dt><dd>An atomically registered <a href="../task/struct.Waker.html" title="struct maitake::task::Waker"><code>Waker</code></a>, for waking a single task.</dd><dt><a class="mod" href="wait_map/index.html" title="mod maitake::sync::wait_map">wait_<wbr>map</a></dt><dd>A map of <a href="../task/struct.Waker.html" title="struct maitake::task::Waker"><code>Waker</code></a>s associated with keys, so that a task can be woken by
key.</dd><dt><a class="mod" href="wait_queue/index.html" title="mod maitake::sync::wait_queue">wait_<wbr>queue</a></dt><dd>A queue of waiting tasks that can be woken in first-in, first-out order (or
all at once).</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Closed.html" title="struct maitake::sync::Closed">Closed</a></dt><dd>An error indicating that a <a href="struct.WaitCell.html" title="struct maitake::sync::WaitCell"><code>WaitCell</code></a>, <a href="struct.WaitQueue.html" title="struct maitake::sync::WaitQueue"><code>WaitQueue</code></a> or <a href="struct.Semaphore.html" title="struct maitake::sync::Semaphore"><code>Semaphore</code></a> was
closed while attempting to register a waiting task.</dd><dt><a class="struct" href="struct.Mutex.html" title="struct maitake::sync::Mutex">Mutex</a></dt><dd>An asynchronous <a href="https://en.wikipedia.org/wiki/Mutual_exclusion">mutual exclusion lock</a> for protecting shared data.</dd><dt><a class="struct" href="struct.MutexGuard.html" title="struct maitake::sync::MutexGuard">Mutex<wbr>Guard</a></dt><dd>An <a href="https://rust-unofficial.github.io/patterns/patterns/behavioural/RAII.html">RAII</a> implementation of a “scoped lock” of a <a href="struct.Mutex.html" title="struct maitake::sync::Mutex"><code>Mutex</code></a>. When this
structure is dropped (falls out of scope), the lock will be unlocked.</dd><dt><a class="struct" href="struct.OwnedMutexGuard.html" title="struct maitake::sync::OwnedMutexGuard">Owned<wbr>Mutex<wbr>Guard</a></dt><dd>An <a href="https://rust-unofficial.github.io/patterns/patterns/behavioural/RAII.html">RAII</a> implementation of a “scoped lock” of a <a href="struct.Mutex.html" title="struct maitake::sync::Mutex"><code>Mutex</code></a>. When this
structure is dropped (falls out of scope), the lock will be unlocked.</dd><dt><a class="struct" href="struct.OwnedRwLockReadGuard.html" title="struct maitake::sync::OwnedRwLockReadGuard">Owned<wbr>RwLock<wbr>Read<wbr>Guard</a></dt><dd>Owned <a href="https://rust-unofficial.github.io/patterns/patterns/behavioural/RAII.html">RAII</a> structure used to release the shared read access of a
<a href="struct.RwLock.html" title="struct maitake::sync::RwLock"><code>RwLock</code></a> when dropped.</dd><dt><a class="struct" href="struct.OwnedRwLockWriteGuard.html" title="struct maitake::sync::OwnedRwLockWriteGuard">Owned<wbr>RwLock<wbr>Write<wbr>Guard</a></dt><dd>Owned <a href="https://rust-unofficial.github.io/patterns/patterns/behavioural/RAII.html">RAII</a> structure used to release the exclusive write access of a
<a href="struct.RwLock.html" title="struct maitake::sync::RwLock"><code>RwLock</code></a> when dropped.</dd><dt><a class="struct" href="struct.RwLock.html" title="struct maitake::sync::RwLock">RwLock</a></dt><dd>An asynchronous <a href="https://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock">readers-writer lock</a>.</dd><dt><a class="struct" href="struct.RwLockReadGuard.html" title="struct maitake::sync::RwLockReadGuard">RwLock<wbr>Read<wbr>Guard</a></dt><dd><a href="https://rust-unofficial.github.io/patterns/patterns/behavioural/RAII.html">RAII</a> structure used to release the shared read access of a <a href="struct.RwLock.html" title="struct maitake::sync::RwLock"><code>RwLock</code></a> when
dropped.</dd><dt><a class="struct" href="struct.RwLockWriteGuard.html" title="struct maitake::sync::RwLockWriteGuard">RwLock<wbr>Write<wbr>Guard</a></dt><dd><a href="https://rust-unofficial.github.io/patterns/patterns/behavioural/RAII.html">RAII</a> structure used to release the exclusive write access of a <a href="struct.RwLock.html" title="struct maitake::sync::RwLock"><code>RwLock</code></a> when
dropped.</dd><dt><a class="struct" href="struct.Semaphore.html" title="struct maitake::sync::Semaphore">Semaphore</a></dt><dd>An asynchronous <a href="https://en.wikipedia.org/wiki/Semaphore_(programming)">counting semaphore</a>.</dd><dt><a class="struct" href="struct.WaitCell.html" title="struct maitake::sync::WaitCell">Wait<wbr>Cell</a></dt><dd>An atomically registered <a href="../task/struct.Waker.html" title="struct maitake::task::Waker"><code>Waker</code></a>.</dd><dt><a class="struct" href="struct.WaitMap.html" title="struct maitake::sync::WaitMap">WaitMap</a></dt><dd>A map of <a href="../task/struct.Waker.html" title="struct maitake::task::Waker"><code>Waker</code></a>s associated with keys, allowing tasks to be woken by
their key.</dd><dt><a class="struct" href="struct.WaitQueue.html" title="struct maitake::sync::WaitQueue">Wait<wbr>Queue</a></dt><dd>A queue of waiting tasks which can be <a href="struct.WaitQueue.html#method.wake" title="method maitake::sync::WaitQueue::wake">woken in first-in, first-out
order</a>, or <a href="struct.WaitQueue.html#method.wake_all" title="method maitake::sync::WaitQueue::wake_all">all at once</a>.</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.WaitResult.html" title="type maitake::sync::WaitResult">Wait<wbr>Result</a></dt><dd>The result of waiting on a <a href="struct.WaitQueue.html" title="struct maitake::sync::WaitQueue"><code>WaitQueue</code></a> or <a href="struct.Semaphore.html" title="struct maitake::sync::Semaphore"><code>Semaphore</code></a>.</dd></dl></section></div></main></body></html>