<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate provides a safe, pure-Rust implementation of the RISC-V SBI interface to be used in S-mode software, such as operating system kernels. This crate implements the `v1.0.0` version of the SBI specification and aims to stay up to date with it as newer versions of the specification are released."><title>sbi - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sbi" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (5f23ef7d3 2024-12-20)" data-channel="nightly" data-search-js="search-036cda7a.js" data-settings-js="settings-0f613d39.js" ><script src="../static.files/storage-59e33391.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sbi/index.html">sbi</a><span class="version">0.2.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#important-safety-note" title="Important safety note">Important safety note</a></li><li><a href="#sbi-extension-support" title="SBI extension support">SBI extension support</a><ul><li><a href="#standard-sbi-extensions" title="Standard SBI extensions">Standard SBI extensions</a></li><li><a href="#experimental-vendor-specific-and-firmware-specific-extensions" title="Experimental, vendor-specific, and firmware-specific extensions">Experimental, vendor-specific, and firmware-specific extensions</a></li><li><a href="#experimental" title="Experimental">Experimental</a></li><li><a href="#vendor-specific" title="Vendor-specific">Vendor-specific</a></li><li><a href="#firmware-specific" title="Firmware-specific">Firmware-specific</a></li></ul></li><li><a href="#license" title="License">License</a></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>sbi</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/sbi/lib.rs.html#8-387">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate provides a safe, pure-Rust implementation of the RISC-V SBI interface to be used in S-mode software, such as operating system kernels. This crate implements the <code>v1.0.0</code> version of the SBI specification and aims to stay up to date with it as newer versions of the specification are released.</p>
<h3 id="important-safety-note"><a class="doc-anchor" href="#important-safety-note">§</a>Important safety note</h3>
<p>Since this crate is meant to be used by S-mode software, it is assumed that you are executing the provided functions from within S-mode with a spec compliant SBI implementation running in M-mode (or S-mode in the case of VS-mode), and considers execution from any other operating mode out of the scope of this crate, which may bring with it memory safety concerns in those environments. Consider this an implicit contract when using the crate.</p>
<h3 id="sbi-extension-support"><a class="doc-anchor" href="#sbi-extension-support">§</a>SBI extension support</h3>
<p>Extension implementation state legend:</p>
<p>✅ - Fully implemented</p>
<p>🚧 - Partially implemented</p>
<p>❌ - Not implemented</p>
<h4 id="standard-sbi-extensions"><a class="doc-anchor" href="#standard-sbi-extensions">§</a>Standard SBI extensions</h4><details>
<summary>SBI extensions implementation state</summary>
<h5 id="legacy-"><a class="doc-anchor" href="#legacy-">§</a>Legacy ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Extension ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Set timer</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
<tr><td>Console putchar</td><td style="text-align: center">1</td><td style="text-align: center">✅</td></tr>
<tr><td>Console getchar</td><td style="text-align: center">2</td><td style="text-align: center">✅</td></tr>
<tr><td>Clear IPI</td><td style="text-align: center">3</td><td style="text-align: center">✅</td></tr>
<tr><td>Send IPI</td><td style="text-align: center">4</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>FENCE.I</code></td><td style="text-align: center">5</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>SFENCE.VMA</code></td><td style="text-align: center">6</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>SFENCE.VMA</code> with ASID</td><td style="text-align: center">7</td><td style="text-align: center">✅</td></tr>
<tr><td>Shutdown</td><td style="text-align: center">8</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="base-"><a class="doc-anchor" href="#base-">§</a>Base ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Get SBI specification version</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
<tr><td>Get SBI implementation ID</td><td style="text-align: center">1</td><td style="text-align: center">✅</td></tr>
<tr><td>Get SBI implementation version</td><td style="text-align: center">2</td><td style="text-align: center">✅</td></tr>
<tr><td>Probe SBI extension</td><td style="text-align: center">3</td><td style="text-align: center">✅</td></tr>
<tr><td>Get machine vendor ID</td><td style="text-align: center">4</td><td style="text-align: center">✅</td></tr>
<tr><td>Get machine architecture ID</td><td style="text-align: center">5</td><td style="text-align: center">✅</td></tr>
<tr><td>Get machine implementation ID</td><td style="text-align: center">6</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="timer-"><a class="doc-anchor" href="#timer-">§</a>Timer ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Set timer</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="interprocessor-interrupt-ipi-"><a class="doc-anchor" href="#interprocessor-interrupt-ipi-">§</a>Interprocessor Interrupt (IPI) ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Send IPI</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="rfence-"><a class="doc-anchor" href="#rfence-">§</a>RFENCE ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Remote <code>FENCE.I</code></td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>SFENCE.VMA</code></td><td style="text-align: center">1</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>SFENCE.VMA</code> with ASID</td><td style="text-align: center">2</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>HFENCE.GVMA</code> with VMID</td><td style="text-align: center">3</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>HFENCE.GVMA</code></td><td style="text-align: center">4</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>HFENCE.VVMA</code> with ASID</td><td style="text-align: center">5</td><td style="text-align: center">✅</td></tr>
<tr><td>Remote <code>HFENCE.VVMA</code></td><td style="text-align: center">6</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="hart-state-management-"><a class="doc-anchor" href="#hart-state-management-">§</a>Hart State Management ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Hart start</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
<tr><td>Hart stop</td><td style="text-align: center">1</td><td style="text-align: center">✅</td></tr>
<tr><td>Get hart status</td><td style="text-align: center">2</td><td style="text-align: center">✅</td></tr>
<tr><td>Hart suspend</td><td style="text-align: center">3</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="system-reset-"><a class="doc-anchor" href="#system-reset-">§</a>System Reset ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>System reset</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div><h5 id="performance-monitoring-unit-"><a class="doc-anchor" href="#performance-monitoring-unit-">§</a>Performance Monitoring Unit ✅</h5><div><table><thead><tr><th>Function</th><th style="text-align: center">Function ID</th><th style="text-align: center">Implemented</th></tr></thead><tbody>
<tr><td>Get number of counters</td><td style="text-align: center">0</td><td style="text-align: center">✅</td></tr>
<tr><td>Get counter information</td><td style="text-align: center">1</td><td style="text-align: center">✅</td></tr>
<tr><td>Configure matching counters</td><td style="text-align: center">2</td><td style="text-align: center">✅</td></tr>
<tr><td>Start counters</td><td style="text-align: center">3</td><td style="text-align: center">✅</td></tr>
<tr><td>Stop counters</td><td style="text-align: center">4</td><td style="text-align: center">✅</td></tr>
<tr><td>Read firmware counter</td><td style="text-align: center">5</td><td style="text-align: center">✅</td></tr>
</tbody></table>
</div></details>
<h4 id="experimental-vendor-specific-and-firmware-specific-extensions"><a class="doc-anchor" href="#experimental-vendor-specific-and-firmware-specific-extensions">§</a>Experimental, vendor-specific, and firmware-specific extensions</h4>
<p>Experimental, vendor-specific, and firmware-specific SBI extensions are provided as opt-in crate features.</p>
<p>The currently supported non-standard SBI extensions are:</p>
<h4 id="experimental"><a class="doc-anchor" href="#experimental">§</a>Experimental</h4>
<p>There are currently no supported experimental SBI extensions.</p>
<h4 id="vendor-specific"><a class="doc-anchor" href="#vendor-specific">§</a>Vendor-specific</h4>
<p>There are currently no supported vendor-specific SBI extensions.</p>
<h4 id="firmware-specific"><a class="doc-anchor" href="#firmware-specific">§</a>Firmware-specific</h4>
<p>There are currently no supported firmware-specific SBI extensions.</p>
<h3 id="license"><a class="doc-anchor" href="#license">§</a>License</h3>
<p><code>sbi</code> is licensed under the Mozilla Public License 2.0</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.hsm"><code>pub use <a class="mod" href="hart_state_management/index.html" title="mod sbi::hart_state_management">hart_state_management</a> as hsm;</code></div></li><li><div class="item-name" id="reexport.pmu"><code>pub use <a class="mod" href="performance_monitoring_unit/index.html" title="mod sbi::performance_monitoring_unit">performance_monitoring_unit</a> as pmu;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="base/index.html" title="mod sbi::base">base</a></div><div class="desc docblock-short">Required base SBI functionality</div></li><li><div class="item-name"><a class="mod" href="hart_state_management/index.html" title="mod sbi::hart_state_management">hart_<wbr>state_<wbr>management</a></div><div class="desc docblock-short">Hart State Management extension</div></li><li><div class="item-name"><a class="mod" href="ipi/index.html" title="mod sbi::ipi">ipi</a></div><div class="desc docblock-short">IPI extension</div></li><li><div class="item-name"><a class="mod" href="legacy/index.html" title="mod sbi::legacy">legacy</a></div><div class="desc docblock-short">Legacy SBI calls</div></li><li><div class="item-name"><a class="mod" href="performance_monitoring_unit/index.html" title="mod sbi::performance_monitoring_unit">performance_<wbr>monitoring_<wbr>unit</a></div><div class="desc docblock-short">Performance Monitoring Unit extension</div></li><li><div class="item-name"><a class="mod" href="rfence/index.html" title="mod sbi::rfence">rfence</a></div><div class="desc docblock-short">RFENCE extension</div></li><li><div class="item-name"><a class="mod" href="system_reset/index.html" title="mod sbi::system_reset">system_<wbr>reset</a></div><div class="desc docblock-short">System Reset extension</div></li><li><div class="item-name"><a class="mod" href="timer/index.html" title="mod sbi::timer">timer</a></div><div class="desc docblock-short">Timer extension</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.hart_mask.html" title="macro sbi::hart_mask">hart_<wbr>mask</a></div><div class="desc docblock-short">A convenience macro to help create a <a href="struct.HartMask.html" title="struct sbi::HartMask"><code>HartMask</code></a> from either one or more
hart IDs or a base and a list of hart IDs.</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.HartMask.html" title="struct sbi::HartMask">Hart<wbr>Mask</a></div><div class="desc docblock-short">A SBI hart mask</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.SbiError.html" title="enum sbi::SbiError">SbiError</a></div><div class="desc docblock-short">Error codes returned by SBI calls</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.ecall0.html" title="fn sbi::ecall0">ecall0</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A zero-argument <code>ecall</code> with the given extension and function IDs.</div></li><li><div class="item-name"><a class="fn" href="fn.ecall1.html" title="fn sbi::ecall1">ecall1</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A one-argument <code>ecall</code> with the given extension and function IDs.</div></li><li><div class="item-name"><a class="fn" href="fn.ecall2.html" title="fn sbi::ecall2">ecall2</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A two-argument <code>ecall</code> with the given extension and function IDs.</div></li><li><div class="item-name"><a class="fn" href="fn.ecall3.html" title="fn sbi::ecall3">ecall3</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A three-argument <code>ecall</code> with the given extension and function IDs.</div></li><li><div class="item-name"><a class="fn" href="fn.ecall4.html" title="fn sbi::ecall4">ecall4</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A four-argument <code>ecall</code> with the given extension and function IDs.</div></li><li><div class="item-name"><a class="fn" href="fn.ecall5.html" title="fn sbi::ecall5">ecall5</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A five-argument <code>ecall</code> with the given extension and function IDs.</div></li><li><div class="item-name"><a class="fn" href="fn.ecall6.html" title="fn sbi::ecall6">ecall6</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">A six-argument <code>ecall</code> with the given extension and function IDs.</div></li></ul></section></div></main></body></html>